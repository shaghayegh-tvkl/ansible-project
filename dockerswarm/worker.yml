- name: Install epel-release
  yum:
    name: "epel-release"
    state: latest
  when: (ansible_facts['distribution'] == "CentOS")
- name: Install pip
  package:
    name: python-pip
    update_cache: yes
    state: present
- name: Set Enviroment Var
  environment:
    PYTHONPATH : "/home/path/.local/lib/python2.7/site-packages"
- name: Install python-setuptools
  package:
    name: python-setuptools
    update_cache: yes
    state: present
- name: Install `ocker-py
  pip:
    name: docker-py
    state: present
- name: Add nodes
  community.docker.docker_swarm:
    state: join
    join_token: swarm_facts['JoinTokens']['Worker']