---
# - name: Install Docker
#   hosts:
#     - manager
#     - servers
#   remote_user: root
#   tasks:
#     - name: Install Docker on CentOS 7
#       include: ./docker/centos.yml
#       when: (ansible_facts['distribution'] == "CentOS")

#     - name: Install Docker on Ubuntu
#       include: ./docker/ubuntu.yml
#       when: (ansible_facts['distribution'] == "Ubuntu")

#   handlers:
#     - name: restart docker
#       service: 
#         name: docker 
#         state: restarted

- name: Build Docker Swarm Manager
  hosts:
    - manager
    - servers
  remote_user: root
  tasks:
    - name: Setup a Docker Swarm Manager
      include: ./dockerswarm/manager.yml
      when: "'manager' in {{group_names}}"

    - name: Setup a Docker Swarm Worker
      include: ./dockerswarm/worker.yml
      when: "'servers' in {{group_names}}"

    - name: Print the var
      debug:
        msg: "This is my var {{ SWARM['swarm_facts']['JoinTokens']['Manager']}}"
...